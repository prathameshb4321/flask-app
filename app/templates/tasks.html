{% extends "base.html" %}
{% block content %}
<section class="card">
  <h1>Your Tasks</h1>
  <form action="{{ url_for('tasks.add_task') }}" method="post" class="add-form">
    <input type="text" name="title" placeholder="New task title..." maxlength="120" required>
    <button class="btn" type="submit">Add</button>
  </form>
  <table class="table">
    <thead>
      <tr><th>#</th><th>Title</th><th>Status</th><th>Actions</th></tr>
    </thead>
    <tbody>
      {% for task in tasks %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ task.title }}</td>
        <td><span class="badge {{ task.status | lower | replace(' ', '-') }}">{{ task.status }}</span></td>
        <td class="actions">
          <form action="{{ url_for('tasks.toggle_status', task_id=task.id) }}" method="post">
            <button class="btn btn-small" type="submit">Next</button>
          </form>
          <form action="{{ url_for('tasks.delete_task', task_id=task.id) }}" method="post">
            <button class="btn btn-small btn-danger" type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="4" class="muted">No tasks yet. Add one above.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
